<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Lavalamp</title>
        <link href="http://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
        <link rel="stylesheet" type="text/css" href="lavalamp.css" />
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.min.js"></script>
        <script src="shaders.js"></script>
        <script src="setup.js"></script>
        <script src="metaball-data.js"></script>
        <script src="Lavaballs.js"></script>
        <script src="Lavalamp.js"></script>
    </head>
    <body>
        <canvas id="ballpen"></canvas>
        <div id="instructions">Right click (or long press) to bring up the settings menu.</div>
        <ul id="settings">
            <li id="movement_speed" class="speed option" title="Controls the speed that balls travel upwards.">
                Movement Speed
            </li>
            <li class="speed control">
                <div id="speedSlider" data-min="0.5" data-max="20" data-step="0.5" data-value="5"></div>
            </li>
            <li id="spawn_rate" class="rate option" title="Controls the rate at which new balls will be created.">
                Spawn Rate
            </li>
            <li class="rate control">
                <div id="rateSlider" data-min="0.5" data-max="20" data-step="0.5" data-value="5"></div>
            </li>
            <li class="size option" title="Controls the range of sizes that newly-spawned balls will be given.">
                Ball Size
            </li>
            <li class="size control">
                <div id="sizeSlider" data-min="0.1" data-max="10" data-value-low="1" data-value-high="4"></div>
            </li>
            <li class="threshold option" title="Controls the cutoff point at which a given vertex will render.">
                Render Threshold
            </li>
            <li class="threshold control">
                <div id="thresholdSlider" data-min="0.1" data-max="0.9" data-step="0.01" data-value="0.5"></div>
            </li>
            <li class="resolution option" title="Controls the spacing of each point taken into consideration when rendering the balls, affecting the quality of the render.">
                Resolution
            </li>
            <li class="resolution control">
                <div id="resolutionSlider" data-min="10" data-max="50" data-step="1" data-value="20"></div>
            </li>
            <li class="material option" title="Controls the material that the balls are rendered with.">
                Ball Material
            </li>
            <li id="material_container" class="material control">
                <ul id="material_options">
                    <li class="material group" title="The materials that are built into the Three.js library.">
                        Three.js Presets
                    </li>
                    <li id="preset_materials" class="material control">
                        <!-- Preset shaders added here at runtime. -->
                    </li>
                    <li class="material group" title="Materials rendered from custom-made shaders.">
                        Custom Materials
                    </li>
                    <li id="custom_materials" class="material control">
                        <!-- Custom shaders added here at runtime. -->
                    </li>
                </ul>
            </li>
        </ul>
        <script>
            setupMenu("#settings", "#material_options");
            // Sets up everything and gets the ball rolling (ha).
            var demo = setupScene("#ballpen");
            var lavalamp = new Lavalamp(new THREE.Vector3(20, 20, 20));
            addEventHandlers(lavalamp, demo);
            addUIElements(lavalamp);
            lavalamp.startFlowing();
        </script>
    </body>
</html>
